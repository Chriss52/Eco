<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfil - EcoStayRD</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/perfilstyle.css" />
  </head>
  <body>
    <!-- HEADER -->
    <header>
      <div class="navbar">
        <div class="navbar-logo">
          <img src="/assets/logooo.png" alt="EcoStayRD Logo" />
          <span>EcoStayRD</span>
        </div>
        <nav class="navbar-menu">
          <ul>
            <li><a href="#">About us</a></li>
            <li><a href="login1.html">Iniciar sesión / Registrarse</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
      <div class="profile-wrapper">
        <!-- SIDEBAR -->
        <aside class="profile-sidebar">
          <div class="profile-avatar">
            <span>?</span>
          </div>
          <h3>Anonymous</h3>
          <p class="profile-info">Miembro desde: 2023</p>
          <div class="profile-menu">
            <a href="#" class="active">Información Personal</a>
            <a href="#">Favoritos</a>
            <a href="#">Historial</a>
          </div>
        </aside>

        <!-- FORMULARIO -->
        <section class="profile-main">
          <h2>Información Personal</h2>
          <form class="profile-form">
            <!-- Nombre -->
            <div class="form-field">
              <label for="nombre">Nombre</label>
              <div class="input-icon">
                <input
                  type="text"
                  id="nombre"
                  placeholder="Ej: María"
                />
                <button
                  type="button"
                  class="icon-button"
                  onclick="editarCampo('nombre')"
                >
                  ✏️
                </button>
              </div>
            </div>

            <!-- Apellido -->
            <div class="form-field">
              <label for="apellido">Apellido</label>
              <div class="input-icon">
                <input
                  type="text"
                  id="apellido"
                  placeholder="Ej: García"
                />
                <button
                  type="button"
                  class="icon-button"
                  onclick="editarCampo('apellido')"
                >
                  ✏️
                </button>
              </div>
            </div>
          </form>

          <!-- Fecha de Nacimiento -->
          <div class="form-field">
            <label for="fecha-nacimiento">Fecha de Nacimiento</label>
            <div class="input-icon">
              <input type="date" id="fecha-nacimiento" />
              <button
                type="button"
                class="icon-button"
                onclick="editarCampo('fecha-nacimiento')"
              >
                ✏️
              </button>
            </div>
          </div>

          <!-- Celular -->
          <div class="form-row">
            <div class="form-field">
              <label for="celular">Celular</label>
              <div class="input-icon">
                <input type="tel" id="celular" />
                <button
                  type="button"
                  class="icon-button"
                  onclick="editarCampo('celular')"
                >
                  ✏️
                </button>
              </div>
            </div>
          </div>

          <!-- País -->
          <div class="form-row">
            <div class="form-field">
              <label for="pais">País</label>
              <div class="input-icon">
                <input type="text" id="pais" />
                <button
                  type="button"
                  class="icon-button"
                  onclick="editarCampo('pais')"
                >
                  ✏️
                </button>
              </div>
            </div>
          </div>

          <!-- Sexo -->
          <div class="form-row">
            <div class="form-field">
              <label for="sexo">Sexo</label>
              <div class="input-icon">
                <input type="text" id="sexo" />
                <button
                  type="button"
                  class="icon-button"
                  onclick="editarCampo('sexo')"
                >
                  ✏️
                </button>
              </div>
            </div>
          </div>

          <!-- Correo Electrónico y Contraseña -->
          <div class="form-row">
            <div class="form-field">
              <label for="correo">Correo Electrónico</label>
              <div class="input-icon">
                <input type="email" id="correo" />
                <button
                  type="button"
                  class="icon-button"
                  onclick="editarCampo('correo')"
                >
                  ✏️
                </button>
              </div>
            </div>

            <div class="form-field">
              <label for="contrasena">Contraseña</label>
              <div class="input-icon">
                <input type="password" id="contrasena" value="********" />
                <button
                  type="button"
                  class="icon-button show-password"
                  onclick="editarCampo('contrasena')"
                >
                  ✏️
                </button>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- FOOTER -->
    <footer>
      <p>© 2025 EcoStayRD. Todos los derechos reservados.</p>
    </footer>

    <script>
      // Función para activar la edición del campo
      function editarCampo(id) {
        const campo = document.getElementById(id);
        campo.focus();
        campo.select();
      }

      // Al cargar la página se recuperan los datos almacenados del usuario que ha iniciado sesión
      window.addEventListener("load", () => {
        const loggedUser = sessionStorage.getItem("loggedUser");
        if (loggedUser) {
          const user = JSON.parse(loggedUser);
          // Asignar los valores a cada campo; se usa el operador OR para dar valor vacío en caso de que no exista
          document.getElementById("nombre").value = user.username || "";
          document.getElementById("apellido").value = user.lastname || "";
          document.getElementById("fecha-nacimiento").value = user.birthday || "";
          document.getElementById("celular").value = user.phone || "";
          document.getElementById("pais").value = user.pais || "";
          document.getElementById("sexo").value = user.sexo || "";
          document.getElementById("correo").value = user.email || "";
          // Por seguridad, no se carga el valor de la contraseña
        }
      });
    </script>
  </body>
</html>
